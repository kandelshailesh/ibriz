(this.webpackJsonpibriz=this.webpackJsonpibriz||[]).push([[4],{377:function(e,t,n){"use strict";n.r(t);var a,r,i=n(39),l=n(0),c=n.n(l),o=n(142),u=n.n(o),s=n(144),d=n(196),m=n(13),p=n(9),f=n(375),h=n(78),b=n(107),g=function(e){var t=e.columns,n=e.total,a=e.dataSource,r=e.loading,i={total:n,onChange:function(e){console.log("Page",e)},pageSize:10,defaultCurrent:1,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},position:["bottomRight"]};return l.createElement(m.a,{renderEmpty:function(){return r?l.createElement("span",null):l.createElement(p.a,{description:"No any incidents found"})}},l.createElement(f.a,{size:"small",pagination:a.length>0?i:{},dataSource:a,columns:t,scroll:b.isMobile?{x:300}:{},loading:{indicator:l.createElement(h.a,{style:{marginTop:30}}),spinning:!!r},rowKey:"id"}))},y=n(170),E=n.n(y),w=n(277),v=n.n(w),k=function(e){return E()(new Date(1e3*e)).format("YYYY-MM-DD")},x=function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new URLSearchParams(t).toString(),e.next=4,v.a.get("/incidents?"+n).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Error while fetching data");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),O=n(295),j=n.n(O),C=[{key:"id",title:"ID",dataIndex:"id",width:b.isMobile?100:"5%",align:"center",fixed:"left",render:function(e){return c.a.createElement("b",null,"#",e)}},{key:"title",title:"Case Title",dataIndex:"title",width:b.isMobile?100:"20%",align:"center",fixed:"left",render:function(e){return e?c.a.createElement("p",{style:{textAlign:"left"}},c.a.createElement(j.a,{lines:3,more:"Show more",less:"Show less",className:"content-css",anchorClass:"my-anchor-css-class",expanded:!1},e)):c.a.createElement("p",{style:{textAlign:"center",opacity:.7}},"-")}},{key:"description",title:"Description",dataIndex:"description",align:"center",render:function(e){return e?c.a.createElement("p",{style:{textAlign:"left"}},c.a.createElement(j.a,{lines:3,more:"Show more",less:"Show less",className:"content-css",anchorClass:"my-anchor-css-class",expanded:!1},e)):c.a.createElement("p",{style:{textAlign:"center",opacity:.7}},"Description not available")},width:b.isMobile?200:"20%",fixed:"left"},{key:"theft_date",title:"Theft Date",dataIndex:"occurred_at",align:"center",render:function(e){return c.a.createElement("span",null,k(e))},width:b.isMobile?100:"10%"},{key:"reported_date",title:"Reported Date",dataIndex:"updated_at",render:function(e){return c.a.createElement("span",null,k(e))},align:"center",width:b.isMobile?100:"10%"},{key:"location",title:"Location",dataIndex:"address",align:"center",width:b.isMobile?100:"10%"},{key:"picture",title:"Image",render:function(e){var t;return e.media.image_url_thumb?c.a.createElement("img",{alt:"Bike",width:b.isMobile?100:200,height:"100",src:null===e||void 0===e||null===(t=e.media)||void 0===t?void 0:t.image_url_thumb}):c.a.createElement("p",{style:{textAlign:"center",opacity:.7}},"Image not available")},width:b.isMobile?100:"10%",align:"center"}],S=n(194),D=n(116),z=n(200),M=function(e){var t=e.overlay;return c.a.createElement(S.a,{trigger:["click"],overlay:t},c.a.createElement(D.a,{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},"Filter By ",c.a.createElement(z.a,null)))},_=n(193),I=function(e){var t=e.item,n=e.onClick;return c.a.createElement(_.a,{onClick:n},t.map((function(e,t){var n=e.key,a=e.title;return c.a.createElement(_.a.Item,{key:n},c.a.createElement("span",null,a))})))},F=n(366),T=n(380),A=n(378),L=n(376),P=function(e){var t=e.placeholder,n=e.title,a=e.type,r=e.onChange;console.log(t,n,a,r);return c.a.createElement(c.a.Fragment,null,function(e){switch(e){case"text":return c.a.createElement(T.b,{size:"middle",direction:"horizontal"},c.a.createElement("label",null,n),c.a.createElement(A.a,{allowClear:!0,placeholder:t,onChange:r}));case"daterange":return c.a.createElement(T.b,{size:"middle",direction:"horizontal"},c.a.createElement("label",null,"Occured Date"),c.a.createElement(L.a.RangePicker,{onChange:r,style:{width:b.isMobile?"80%":""}}))}}(a))},N=n(371),R=[{key:"title",title:"Title"},{key:"occurred_at",title:"Occurred Date"}],Y=function(e){var t=e.dataSource,n=(e.filter,e.setFilter),a=e.setFilterData,r=Object(l.useState)(""),i=Object(d.a)(r,2),o=i[0],u=i[1],s=Object(l.useState)(""),m=Object(d.a)(s,2),p=m[0],f=m[1],h=Object(l.useState)([]),g=Object(d.a)(h,2),y=g[0],E=g[1],w=c.a.createElement(I,{onClick:function(e){u(e.key)},item:R}),v=[{placeholder:"Title",title:"Title",type:"text",key:"title",onChange:function(e){f(e.target.value)}},{title:"Occurred Date",type:"daterange",key:"occurred_at",onChange:function(e){if(e){var t=e[0].unix(),n=e[1].unix();E([t,n])}}}];return c.a.createElement(T.b,{size:"middle",direction:b.isMobile?"vertical":"horizontal"},c.a.createElement(M,{overlay:w}),o&&c.a.createElement(c.a.Fragment,null,c.a.createElement(P,v.filter((function(e){return e.key===o}))[0]),c.a.createElement(T.b,{direction:"horizontal",style:{marginLeft:0}},c.a.createElement(D.a,{type:"primary",onClick:function(){try{var e=t;switch(o){case"title":p?e=t.filter((function(e){return-1!==e.title.toLowerCase().indexOf(p.toLowerCase())})):F.b.error("Please enter title");break;case"occurred_at":y.length>0?e=t.filter((function(e){var t=e.occurred_at;return t>=y[0]&&t<=y[1]})):F.b.error("Please select occurred date")}n(!0),a(e)}catch(r){console.log(r)}}},"Filter"),c.a.createElement(D.a,{onClick:function(){u(""),n(!1),a(t)},type:"link"},c.a.createElement(N.a,null),"Clear Filters"))))},B=n(40),J=n(373),K=n(367),q=n(379),U=function(e){var t=e,n=t.columns,a=t.rowCount;return c.a.createElement(f.a,{rowKey:"key",pagination:!1,dataSource:Object(K.a)(Array(a)).map((function(e,t){return{key:"key".concat(t)}})),columns:n.map((function(e){return Object(J.a)(Object(J.a)({},e),{},{render:function(){return c.a.createElement(q.a,{key:e.dataIndex,title:!0,paragraph:!1})}})}))})},G=n(297),H=n.n(G),Q=B.a.div(a||(a=Object(i.a)(["\n  display: block;\n  width: 80%;\n  height: 100%;\n  margin: 0px auto;\n  padding: 10px;\n  @media screen and (max-width: 700px) {\n    width: 100% !important ;\n  }\n"]))),V=function(){var e=Object(l.useState)(0),t=Object(d.a)(e,2),n=t[0],a=t[1],r=Object(l.useState)(!0),i=Object(d.a)(r,2),o=i[0],m=i[1],p=Object(l.useState)([]),f=Object(d.a)(p,2),h=f[0],b=f[1],y=Object(l.useState)([]),E=Object(d.a)(y,2),w=E[0],v=E[1],k=Object(l.useState)(!1),O=Object(d.a)(k,2),j=O[0],S=O[1],D=Object(l.useState)("Berlin"),z=Object(d.a)(D,2),M=z[0],_=(z[1],function(){var e=Object(s.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={proximity:M,incident_type:"theft"},e.next=4,x(t);case 4:n=e.sent,v(n.incidents),b(n.incidents),m(!1),a(n.incidents.length),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),m(!1),F.b.error("Error while fetching data");case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}());return Object(l.useEffect)((function(){_()}),[]),o?c.a.createElement(Q,null,c.a.createElement(T.b,{style:{width:"100%"},direction:"vertical",size:"middle"},c.a.createElement(H.a,{shape:"square"}),c.a.createElement(U,{rowCount:10,columns:C}))):c.a.createElement(Q,null,c.a.createElement(T.b,{direction:"vertical",size:"middle"},c.a.createElement(Y,{filter:j,setFilter:S,dataSource:w,setFilterData:b}),c.a.createElement(g,{total:n,dataSource:j?h:w,columns:C,loading:o})))},W=B.a.div(r||(r=Object(i.a)(["\n  background: ",";\n  height: 100%;\n  width: 100vw;\n"])),(function(e){return e.primary?"palevioletred":"white"}));t.default=function(){return c.a.createElement(W,null,c.a.createElement(V,null))}}}]);
//# sourceMappingURL=4.c999f564.chunk.js.map